<script>
  $(document).ready(function () {
    $(".status-checkbox").click(function () {
      var extraId = $(this).attr("data-extraId");
      if ($(this).is(":checked")) {
        $(".status-" + extraId).val("on");
      } else {
        $(".status-" + extraId).val("off");
      }
    });
  });
</script>

<script>
  $(document).ready(function () {
    $("select#maxOption").val(
      "<% if (editing) { %><%=  variant[0].ProductVariantsExtras[0].Variant.maxOption %><% } %>"
    );
    $("select#categoryId").val(
      "<% if (editing) { %><%=  variant[0].ProductVariantsExtras[0].Variant.categoryId %><% } %>"
    );
    $("select#propertyValueId").val(
      "<% if (editing) { %><%=  testing3 %><% } %>"
    );
  });
</script>
<script>
  $(document).ready(function () {
    $(".status-checkbox-option").click(function () {
      var optionId = $(this).attr("data-optionId");
      if ($(this).is(":checked")) {
        $(".statusOption" + optionId).val("on");
      } else {
        $(".statusOption" + optionId).val("off");
      }
    });
  });
</script>
<script>
  $(document).ready(function () {
    $(".status-checkbox").click(function () {
      var extraId = $(this).data("extraId");
      $("#price_error_message_" + extraId).hide();
      $("#qtMin_error_message_" + extraId).hide();
      $("#qtMax_error_message_" + extraId).hide();
      var error_price = false;
      var error_qtMin = false;
      var error_qtMax = false;
    });

    function check_variantInputs() {
      var extraId = $(this).attr("data-extraId");
      $(".extra_box").each(function () {
        var extraId = $(this).data("extra");
        var price_len = $(".price_" + extraId).val().length;
        var qtMin_len = $(".qtMin_" + extraId).val().length;
        var qtMax_len = $(".qtMax_" + extraId).val().length;
        if (
          $(this).find("input:checkbox").is(":checked") &&
          (price_len < 0 || qtMin_len < 0 || qtMax_len < 0)
        ) {
          $("#quantityMin").on("mouseup keyup", function () {
            $(this).val(Math.min(20, Math.max(1, $(this).val())));
          });
          if (price_len < 1) {
            $("#price_error_message_" + extraId)
              .show()
              .html("Mezo kitoltese kotelezo");
            error_price = true;
          } else {
            $("#price_error_message_" + extraId)
              .hide()
              .html("");
          }
          if (qtMin_len < 1) {
            $("#qtMin_error_message_" + extraId)
              .show()
              .html("Mezo kitoltese kotelezo");
            error_qtMin = true;
          } else {
            $("#qtMin_error_message_" + extraId)
              .hide()
              .html("");
          }
          if (qtMax_len < 1) {
            $("#qtMax_error_message_" + extraId).show();
            $("#qtMax_error_message_" + extraId).html(
              "Mezo kitoltese kotelezo"
            );
            error_qtMax = true;
          } else {
            $("#qtMax_error_message_" + extraId)
              .hide()
              .html("");
          }
        } else {
          $(this).find(".extra_error_message").hide();
        }
      });
    }

    $(".extra_price_input").focusout(function () {
      var len = $(this).val().length;
      var extraId = $(this).closest(".extra_box").data("extra");
      if (len < 1) {
        $("#price_error_message_" + extraId)
          .show()
          .html("Mezo kitoltese kotelezo");
      } else {
        $("#price_error_message_" + extraId)
          .hide()
          .html("");
      }
    });

    $(".extra_qtMin_input").focusout(function () {
      var len = $(this).val().length;
      var extraId = $(this).closest(".extra_box").data("extra");
      if (len < 1) {
        $("#qtMin_error_message_" + extraId)
          .show()
          .html("Mezo kitoltese kotelezo");
      } else {
        $("#qtMin_error_message_" + extraId)
          .hide()
          .html("");
      }
    });
    $(".extra_qtMax_input").focusout(function () {
      var len = $(this).val().length;
      var extraId = $(this).closest(".extra_box").data("extra");
      if (len < 1) {
        $("#qtMax_error_message_" + extraId)
          .show()
          .html("Mezo kitoltese kotelezo");
      } else {
        $("#qtMax_error_message_" + extraId)
          .hide()
          .html("");
      }
    });
    $("#variant_form").submit(function () {
      error_price = false;
      error_qtMin = false;
      error_qtMax = false;
      check_variantInputs();
      if (
        error_price == false &&
        error_qtMin == false &&
        error_qtMax == false
      ) {
        return true;
      } else {
        return false;
      }
    });
  });
</script>
<script>
  $(function () {
    $("#sku_error_message").hide();

    var error_sku = false;

    $("#sku").focusout(function () {
      check_sku();
    });

    function check_sku() {
      var sku_length = $("#sku").val().length;

      if (sku_length < 2 || sku_length > 40) {
        $("#sku_error_message").html(`<%= lingua.extra_hu_name_required %>`);
        $("#sku_error_message").show();
        error_sku = true;
      } else {
        $("#sku_error_message").hide();
      }
    }

    $("#variant_form").submit(function () {
      error_sku = false;

      check_sku();

      if (error_sku == false) {
        return true;
      } else {
        return false;
      }
    });
  });
</script>
<script>
  $(document).ready(function () {
    $(function () {
      $("#createVariant").one("click", function () {
        $("#createVariant").prop("disabled", true);
        $("#variant_form").submit();
      });
    });
  });
</script>

<script>
  $(document).ready(function () {
    $("#search").keyup(function () {
      // Retrieve the input field text and reset the count to zero
      var filter = $(this).val(),
        count = 0;

      // Loop through the comment list
      $(".extra-all").each(function () {
        // If the list item does not contain the text phrase fade it out
        if ($(this).text().search(new RegExp(filter, "i")) < 0) {
          $(this).fadeOut();

          // Show the list item if the phrase matches and increase the count by 1
        } else {
          $(this).show();
          count++;
        }
      });
    });
  });
</script>

<script>
  $(document).ready(function () {
    $("#categoryId").on("change", function () {
      const categoryId = $("#categoryId").val();
      $.get("search-variant-category/" + categoryId).done(function (data) {
        $("#propByCat").html(data);
      });
    });
  });
</script>

<% if (editing) { %> <% for (let i = 0; i < variant.length; i++) { %> <% if
(variant[i].ProductVariantsExtras[0].active ==1) { %>
<script>
  $(document).ready(function () {
    var activeCheckbox = "<%= variant[i].ProductVariantsExtras[0].extraId %>";
    $(".status-checkbox-" + activeCheckbox).prop("checked", true);
    $(".status-" + activeCheckbox).val("on");
  });
</script>
<% } %> <% } %> <% } %> <% if (editing) { %> <% for (let i = 0; i <
variant.length; i++) { %> <% if (
variant[i].ProductVariantsExtras[0].requiredExtra == 1) { %>
<script>
  $(document).ready(function () {
    var activeCheckbox = "<%= variant[i].ProductVariantsExtras[0].extraId %>";
    $(".status-checkbox-option-" + activeCheckbox).prop("checked", true);
    $(".statusOption" + activeCheckbox).val("on");
  });
</script>
<% } %> <% } %> <% } %>
