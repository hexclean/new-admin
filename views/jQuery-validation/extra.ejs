<script>
  $(document).ready(function () {
    $(".status-checkbox").click(function () {
      var extraId = $(this).attr("data-extraId");
      if ($(this).is(":checked")) {
        $(".status-" + extraId).val("on");
      } else {
        $(".status-" + extraId).val("off");
      }
    });
  });
</script>

<script>
  $(function () {
    $("#roName_error_message").hide();
    $("#huName_error_message").hide();
    $("#enName_password_error_message").hide();
    $("#allergen_error_message").hide();

    var error_roName = false;
    var error_huName = false;
    var error_enName = false;
    var error_sku = false;
    var error_allergen = false;

    $("#roName").focusout(function () {
      check_roName();
    });

    $("#huName").focusout(function () {
      check_huName();
    });

    $("#enName").focusout(function () {
      check_enName();
    });

    $(".status-checkbox").change(function () {
      check_allergen();
    });

    function check_roName() {
      var roName_length = $("#roName").val().length;

      if (roName_length < 1 || roName_length > 50) {
        $("#roName_error_message").html(
          `<%= lingua.extra_ro_name_validation %>`
        );
        $("#roName_error_message").show();
        error_roName = true;
      } else {
        $("#roName_error_message").hide();
      }
    }

    function check_huName() {
      var huName_length = $("#huName").val().length;

      if (huName_length < 1 || huName_length > 50) {
        $("#huName_error_message").html(
          `<%= lingua.extra_hu_name_validation %>`
        );
        $("#huName_error_message").show();
        error_huName = true;
      } else {
        $("#huName_error_message").hide();
      }
    }

    function check_enName() {
      var enName_length = $("#enName").val().length;

      if (enName_length < 1 || enName_length > 50) {
        $("#enName_error_message").html(
          `<%= lingua.extra_en_name_validation %>`
        );
        $("#enName_error_message").show();
        error_enName = true;
      } else {
        $("#enName_error_message").hide();
      }
    }

    function check_allergen() {
      if ($(".status-hidden[value='on']").length < 1) {
        $("#allergen_error_message").html("csak 1 et lehet megadni");
        $("#allergen_error_message").show();
        error_allergen = true;
        $("#createBox").disabled = true;
      } else {
        $("#allergen_error_message").hide();
        $("#createBox").removeAttr("disabled");
      }
    }
    $("#createExtra_form").submit(function () {
      error_roName = false;
      error_huName = false;
      error_enName = false;
      error_allergen = false;

      check_roName();
      check_huName();
      check_enName();
      check_allergen();

      if (
        error_roName == false &&
        error_huName == false &&
        error_enName == false &&
        error_allergen == false
      ) {
        $("#createBox").prop("disabled", true);
        return true;
      } else {
        return false;
      }
    });
  });
</script>
<style>
  .intro {
    border-color: red;
  }
</style>

<script>
  $(document).ready(function () {
    $(function () {
      $("#createExtra").one("click", function () {
        $("#createExtra_form").submit();
      });
    });
  });
</script>
