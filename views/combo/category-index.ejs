

<%- include('../includes/head.ejs') %>
<script>
$(document).ready(function() {
	$('#search').keyup(function() {
		const extraId = $('#search').val();
		$.get("get-filtered-category/" + extraId).done(function(data) {
			$("#searchedCategory").html(data);
		});
	});
})
</script>

</head>
<body class="ms-body ms-aside-left-open ms-primary-theme ms-has-quickbar">
   <%- include('../includes/navigation.ejs') %> 
   <main class="body-content">
      <%- include('../includes/navigation-bar.ejs') %>
      <div class="ms-content-wrapper">
         <div class="ms-profile-overview no-img-var">
            <ul class="ms-profile-navigation nav nav-tabs tabs-bordered" role="tablist">
               <li role="presentation"><a href="#" aria-controls="tab1" class="active show" role="tab" data-toggle="tab"><%= lingua.all_categories %></a></li>
               <li role="presentation"><a class="add-variant" href="/admin/add-category"><%= lingua.create_category %></a></li>
               <!-- <li role="presentation"><a class="add-variant" href="/admin/order-category">Kategoria Sorrend</a></li> -->
            </ul>
         </div>
      </div>
      <div class="col-md-6">
         <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
               <li class="breadcrumb-item">
                  <a a href="/admin/vr-index"
                     ><i class="material-icons"></i><%= lingua.back %></a
                     >
               </li>
               <li class="breadcrumb-item active" aria-current="page">
                  <%= lingua.categories %>
               </li>
            </ol>
         </nav>
      </div>
      <% if ( checkAllergenLength.length === 0) { %>
      <script>
         $('.add-extra').click(function () {return false;});
      </script>
      <div class="alert alert-danger" role="alert">
         <i class="flaticon-alert-1"></i> <strong class="alert-message-popup">Oh snap! eloszor Allergen kell az extrahoz</strong >
      </div>
      <% } %>
      <% if ( property.length < 2) { %>
      <script>
         $('.add-extra').click(function () {return false;});
      </script>
      <div class="alert alert-danger" role="alert">
         <i class="flaticon-alert-1"></i> <strong class="alert-message-popup">Oh snap! legalabb 2 property kell</strong >
      </div>
      <% } %>
      <div class="ms-content-wrapper">
         <div class="row">
            <div class="col-12">
               <div class="ms-panel">
                  <div class="ms-panel-header">
                     <h6> <%= lingua.all_categories %></h6>
                  </div>
                  <div class="ms-panel-body">
                     <div  class="table-responsive">
                        <table id="searchedCategory" class="table table-hover thead-primary">
                           <thead>
                              <tr>
                                 <th scope="col">Id</th>
                                 <th scope="col"><%= lingua.category_list_name %></th>
                                 <th scope="col"><%= lingua.category_list_status %></th>
                                 <th scope="col"><%= lingua.category_list_operation %></th>
                              </tr>
                           </thead>
                           <div class="col-6">
                              <input type="text" name="search" id="search" placeholder="<%= lingua.search_category %>" class="category-search form-control" />
                              <hr>
                           </div>
                           <% if (category.length > 0) { %>
                           <% for (let i = 0; i < category.length; i++) { %>
                           <tbody>
                              <th scope="row"><%= category[i].id %></th>
                              <td><%= category[i].CategoryTranslations[0].name %></td>
                              <td><span class="badge badge-success"><%= lingua.status_active %></span></td>
                              <td>
                                 <a href="/admin/edit-category/<%= category[i].id %>?edit=true"class="btn grid-btn mt-0 btn-sm btn-secondary" ><%= lingua.button_edit %></a>
                              </td>
                           </tbody>
                           <% } %>
                           <% } else { %>
                           <h1>No Products Found!</h1>
                           <% } %>
                        </table>
                     </div>
                     <%- include('../includes/pagination.ejs', {currentPage: currentPage, nextPage: nextPage, previousPage: previousPage, lastPage: lastPage, hasNextPage: hasNextPage, hasPreviousPage: hasPreviousPage}) %>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </main>
   <%- include('../includes/end.ejs') %>
</body>

